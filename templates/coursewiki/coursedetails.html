{% extends "coursewiki/base.html" %}
{% load comments %}

{% block subpage_title %}
    {{ course.code }} - Course Details
{% endblock %}

{% block page_css %}
    <link rel="stylesheet" type="text/css"
        href="{{ STATIC_URL }}css/coursewiki/main.css">
    <link rel="stylesheet" type="text/css"
        href="{{ STATIC_URL }}css/coursewiki/coursedetails.css">
{% endblock %}

{% block scripts %}
    <script src="{{ STATIC_URL }}scripts/libs/jquery.js"
        type="text/javascript"></script>
    <script src="{{ STATIC_URL }}scripts/coursewiki/coursedetails.js"
        type="text/javascript"></script>
{% endblock %}

{% block padded_content %}
    <div id="container">

    <div class="course-details">
        <h1 class="no-bottom-margin">
            {{ course.code }}
            <span class="faded-out">{{ course.name }}</span>
        </h1>
        <span class="subtext">
            {{ course.description }}
            <div class="course-actions">
                <a href="history">History</a>
                <a href="edit">Edit</a>
            </div>
        </span>

    
        <h2 class="minimal-bottom-margin">Sections</h2>
        {% if sections|length > 0 %}
            <ul>
            {% for section in sections %}
                <li>{{ section.name }} 
            {% endfor %}
            </ul>
        {% else %}
            <span class="subtext">
                This course doesn't have any sections yet.
            </span>
        {% endif %}
    </div>

    <div class="course-comments">
        {% get_comment_count for course as comment_count %}

        {# Comment input form #}
        <div id="comment-input" class="side-box">
            <textarea id="comment-box" rows="5" cols="60"></textarea>
            <div id="comment-preview">
            </div>
            <div class="controls">
                <span class="subtext">
                    <a id="markdown-toggle" onclick="toggleMarkdownHelp()"
                        href="#">
                        Formatting help
                    </a>
                </span>
                <span class="preview-controls">
                    <img src="/static/images/spinner.gif" class="spinner"></img>
                    <label>Generating preview</label>
                    <input type="button" value="Cancel" onClick="cancelPreview()">
                    </input>
                </span>
                <input name="close-preview" type="button" value="Close Preview"
                    class="hidden" onClick="closePreview()">
                </input>
                <input name="get-preview" type="button" value="Preview"
                    onClick="getPreview()" class="submitbutton"></input>
                <input type="button" value="Post it!"
                    class="submitbutton"></input>
            </div>
            <div id="markdown-help">
                You can use <b>Markdown</b> to style your comments. Here are
                examples of how to do it:
                <table>
                    <tr>
                        <th>Raw input</th>
                        <th>Final output</th>
                    </tr>
                    <tr>
                        <td>*italicized*</td>
                        <td><i>italicized</i></td>
                    </tr>
                    <tr>
                        <td>**bold**</td>
                        <td><b>bold</b></td>
                    </tr>
                    <tr>
                        <td>
                            * A list item<br>
                            * Another list item
                        </td>
                        <td>
                            <ul>
                                <li> A list item
                                <li> Another list item
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            &gt; This is a quote,<br>
                            &gt; as you can see.
                        </td>
                        <td>
                            <blockquote>
                                <p>
                                    This is a quote, as you can see.
                                </p>
                            </blockquote>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            You need an empty line
                            <br><br>
                            to start a new paragraph
                        </td>
                        <td>
                            <p>You need an empty line</p>
                            <p>to start a new paragraph</p>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        {% if comment_count == 0 %}
            <div id="nocomments">
                No comments yet
            </div>
        {% endif %}

        {% get_comment_list for course as comments %}
        {% for comment in comments %}
            <div class="comment-header subtext">
                {{ comment.user_name }}
            </div>
            <div class="comment-content">
                {{ comment.comment }}
            </div>
        {% endfor %}
    </div>

    </div>
{% endblock %}

